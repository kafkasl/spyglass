# Spyglass phone SSH hardening â€” Tailscale-only access
# $TS_IP is replaced by setup.sh with the phone's Tailscale IP

# Tailscale-only binding
ListenAddress $TS_IP
Port 8022

# Authentication: key-only
PubkeyAuthentication yes
PasswordAuthentication no
KbdInteractiveAuthentication no
PermitEmptyPasswords no
HostbasedAuthentication no
AuthenticationMethods publickey
MaxAuthTries 3
MaxSessions 3

# Brute-force / DoS mitigation
LoginGraceTime 20
MaxStartups 3:30:10

# Idle session cleanup
ClientAliveInterval 60
ClientAliveCountMax 2

# Disable unused features
X11Forwarding no
AllowTcpForwarding no
AllowAgentForwarding no
AllowStreamLocalForwarding no
PermitTunnel no
PrintMotd no
IgnoreRhosts yes
